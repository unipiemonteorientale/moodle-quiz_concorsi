define("quiz_concorsi/actions",["exports","core/modal_factory","core/modal_events","core/str"],(function(_exports,_modal_factory,_modal_events,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Manage modal to confirm actions or get additional data.
   *
   * @module      quiz_concorsi/actions
   * @copyright   2023 Roberto Pinna
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);const Selectors_askZipPassword='[data-action="quiz_concorsi/ask_zip_password"]',Selectors_password1='[name="enteredpassword1"]',Selectors_password2='[name="enteredpassword2"]',Selectors_errorMessage='[data-action="quiz_concorsi/error_message"]',Selectors_saveButton='[data-action="save"]',Selectors_zipPassword='[name="archivepassword"]';_exports.init=async()=>{var passwordString=await(0,_str.get_string)("password","core"),againString=await(0,_str.get_string)("again","core"),passwordsDifferString=await(0,_str.get_string)("passwordsdiffer","core");const askPassword=await _modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,title:(0,_str.get_string)("typepassword","quiz_concorsi"),body:'<label for="enteredpassword1">'+passwordString+'</label> <input type="password" name="enteredpassword1" /><br /><label for="enteredpassword2">'+passwordString+" ("+againString+')</label> <input type="password" name="enteredpassword2" /><br /><span data-action="quiz_concorsi/error_message" class="alert-warning"></span>',show:!1,removeOnClose:!1});document.addEventListener("click",(e=>{e.target.closest(Selectors_askZipPassword)&&(e.preventDefault(),askPassword.show(),document.querySelector(Selectors_saveButton).disabled=!0,askPassword.getRoot().on(_modal_events.default.save,(()=>{document.querySelector(Selectors_password1).value==document.querySelector(Selectors_password2).value&&(document.querySelector(Selectors_zipPassword).value=document.querySelector(Selectors_password1).value,document.querySelector(Selectors_askZipPassword).parentElement.submit())})))})),document.addEventListener("keyup",(e=>{(e.target.closest(Selectors_password1)||e.target.closest(Selectors_password2))&&(document.querySelector(Selectors_saveButton).disabled=!0,document.querySelector(Selectors_password1).value!=document.querySelector(Selectors_password2).value?(document.querySelector(Selectors_errorMessage).innerText=passwordsDifferString,document.querySelector(Selectors_saveButton).disabled=!0):(document.querySelector(Selectors_errorMessage).innerText="",""!=document.querySelector(Selectors_password1).value&&(document.querySelector(Selectors_saveButton).disabled=!1)))}))}}));

//# sourceMappingURL=actions.min.js.map